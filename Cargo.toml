[package]
name = "opening-hours"
version = "0.10.0"
authors = ["Rémi Dupré <remi@dupre.io>"]
license = "MIT OR Apache-2.0"
readme = "README.md"
repository = "https://github.com/remi-dupre/opening-hours-rs"
documentation = "https://docs.rs/opening-hours"
homepage = "https://github.com/remi-dupre/opening-hours-rs"
description = "A parser and evaluation tool for the opening_hours fields in OpenStreetMap."
edition = "2021"
exclude = ["dist/"]  # generated by maturin
build = "opening-hours/build.rs"

[workspace]
members = ["compact-calendar", "opening-hours-syntax", "opening-hours-py", "fuzz"]

[lib]
path = "opening-hours/src/lib.rs"

[features]
# Disable timeout behavior for performance tests. This is useful when tests
# need to be in slow environments or with high overhead, for example when
# measuring coverage.
disable-test-timeouts = []

[dependencies]
compact-calendar = { path = "compact-calendar", version = "0.10.0" }
opening-hours-syntax = { path = "opening-hours-syntax", version = "0.10.0" }
chrono = "0.4"
chrono-tz = "0.10"  # TODO: feature flag
country-boundaries = "1.2"  # TODO: feature flag
flate2 = "1.0"  # TODO: feature flag
log = { version = "0.4", features = [ "kv" ] }
sunrise-next = "1.2"  # TODO: feature flag
tzf-rs = { version = "0.4", default-features = false }  # TODO: feature flag

[build-dependencies]
compact-calendar = { path = "compact-calendar", version = "0.10.0" }
country-boundaries = "1.2"  # TODO: feature flag
chrono = "0.4"
flate2 = "1.0"

[dev-dependencies]
chrono-tz = "0.10"
criterion = "0.5"

[[bench]]
name = "benchmarks"
harness = false
path = "opening-hours/benches/benchmarks.rs"

[profile.dev.package.flate2]
opt-level = 3  # build script will run substantially faster for dev

[profile.bench]
codegen-units = 1
lto = "fat"
